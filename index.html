<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gambler's Ruin Markov Chain (Simple)</title>
    
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script> 
    
    <style>
        /* General Layout */
        body { font-family: sans-serif; margin: 20px; background-color: #f4f7f9; }
        .container { max-width: 1000px; margin: auto; background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        h1 { color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
        h2, h3 { color: #555; }
        .grid { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; }
        .controls, .results { padding: 15px; border: 1px solid #ddd; border-radius: 6px; }
        
        /* Input/Button Styles */
        .input-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .input-group input { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; color: white; font-weight: bold; margin-top: 5px; width: 100%; }
        #resetBtn { background-color: #6c757d; }
        #stepBtn { background-color: #007bff; }
        #playBtn { background-color: #28a745; }
        
        /* Table Styles */
        .vector-table th, .vector-table td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        .vector-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px; }
        
        /* Chart Styles */
        .chart-container { 
            height: 200px; 
            display: flex; 
            align-items: flex-end; /* Bars start at the bottom */
            justify-content: space-around; 
            background-color: #f8f8f8; 
            padding: 10px; 
            border-radius: 4px; 
        }
        .bar-wrapper { 
            flex: 1; 
            margin: 0 2px; 
            display: flex; 
            flex-direction: column; 
            justify-content: flex-end; 
            align-items: center; 
        }
        .bar { 
            width: 80%; 
            transition: height 0.3s ease; 
            border-radius: 3px 3px 0 0; 
            /* COLOR IS NOW SET IN SCRIPT.JS */
        }
        .bar-label { font-size: 10px; margin-top: 5px; }
        .bar-value { font-size: 10px; margin-bottom: 3px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gambler's Ruin Markov Chain Simulator</h1>
        <p>A simple Discrete-Time Markov Chain visualization running on pure HTML/JavaScript.</p>
        
        <div class="grid">
            <div class="controls">
                <h2>Scenario Setup</h2>
                <div class="input-group">
                    <label for="N_goal">Goal State ($N$):</label>
                    <input type="number" id="N_goal" value="5" min="1" onchange="resetSimulation()">
                </div>
                <div class="input-group">
                    <label for="n_start">Start State ($n$):</label>
                    <input type="number" id="n_start" value="3" min="0" onchange="resetSimulation()">
                </div>
                <div class="input-group">
                    <label for="p_win">Win Probability ($p$):</label>
                    <input type="number" id="p_win" value="0.5" min="0" max="1" step="0.01" onchange="resetSimulation()">
                </div>

                <h3 style="margin-top: 20px;">Simulation Controls</h3>
                <div style="background-color: #e9ecef; padding: 10px; border-radius: 4px; text-align: center; margin-bottom: 10px;">
                    <div style="font-size: 14px; color: #555;">Current Step:</div>
                    <div id="currentStepDisplay" style="font-size: 24px; font-weight: bold; color: #007bff;">0</div>
                </div>

                <button id="resetBtn" onclick="resetSimulation()">Reset to Step 0</button>
                <button id="stepBtn" onclick="advanceSteps(1)">Next Step (+1)</button>
                
                <div style="display: flex; gap: 5px; margin-top: 5px;">
                    <input type="number" id="playSteps" value="10" min="1" style="flex: 1;">
                    <button id="playBtn" onclick="advanceSteps(parseInt(document.getElementById('playSteps').value))" style="flex: 2;">
                        Play N Steps
                    </button>
                </div>
            </div>

            <div class="results">
                <h2>Probability Distribution</h2>

                <div class="chart-container" id="chartContainer">
                    </div>

                <h3 style="margin-top: 20px;">Current State Vector ($\pi_k$)</h3>
                <div id="vectorTableContainer">
                    </div>

                <h3 style="margin-top: 20px;">1-Step Transition Matrix ($\mathbf{P}$)</h3>
                <div id="transitionMatrixContainer" style="overflow-x: auto;">
                    </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>